{"version":3,"file":"index.min.js","sources":["../src/utils/shallowEqual.ts","../src/utils/bindActions.ts","../src/preact/components/Connect.tsx","../src/preact/components/Provider.tsx"],"sourcesContent":["export default function shallowEqual(a, b) {\n  for (const i in a) if (a[i] !== b[i]) return false\n  for (const i in b) if (!(i in a)) return false\n  return true\n}\n","export default function bindActions(actions, store) {\n  actions = typeof actions === \"function\" ? actions(store) : actions\n\n  let bound = {}\n  for (let name in actions) {\n    bound[name] = (...args) => {\n      let ret = actions[name](store.getState(), ...args)\n      if (ret != null) {\n        if (ret.then) return ret.then(store.setState)\n        store.setState(ret)\n      }\n    }\n  }\n\n  return bound\n}\n","import { Component } from \"preact\"\n\nimport shallowEqual from \"../../utils/shallowEqual\"\nimport bindActions from \"../../utils/bindActions\"\n\nexport default class Connect extends Component<any, {}> {\n  unsubscribe\n  state = this.getProps()\n  actions = this.getActions()\n  componentWillMount() {\n    this.unsubscribe = this.context.store.subscribe(this.update)\n  }\n  componentWillUnmount() {\n    this.unsubscribe(this.update)\n  }\n  getProps() {\n    const { mapToProps } = this.props\n    const state = (this.context.store && this.context.store.getState()) || {}\n    return mapToProps ? mapToProps(state, this.props) : state\n  }\n  getActions() {\n    const { actions } = this.props\n    return bindActions(actions, this.context.store)\n  }\n  update = () => {\n    const mapped = this.getProps()\n    if (!shallowEqual(mapped, this.state)) {\n      this.setState(mapped)\n    }\n  }\n  render({ children }, state, { store }) {\n    return children[0]({ store, ...state, ...this.actions })\n  }\n}\n","import { Component } from \"preact\"\n\nimport Props from \"../../interfaces/Props\"\nimport Store from \"../../interfaces/Store\"\n\nexport default class Provider extends Component<Props, {}> {\n  getChildContext() {\n    return { store: this.props.store }\n  }\n  render() {\n    return this.props.children[0]\n  }\n}\n"],"names":["a","b","i","actions","store","bound","name_1","_i","args","ret","getState","then","setState","_this","getProps","getActions","mapped","shallowEqual","state","tslib_1.__extends","Connect","this","unsubscribe","context","subscribe","update","mapToProps","props","bindActions","_a","_b","children","Component","Provider"],"mappings":"8WAAqCA,EAAGC,GACtC,IAAK,IAAMC,KAAKF,EAAG,GAAIA,EAAEE,KAAOD,EAAEC,GAAI,OAAO,EAC7C,IAAK,IAAMA,KAAKD,EAAG,KAAMC,KAAKF,GAAI,OAAO,EACzC,OAAO,aCH2BG,EAASC,GAC3CD,EAA6B,mBAAZA,EAAyBA,EAAQC,GAASD,EAE3D,IAAIE,KACJ,IAAK,IAAIC,KAAQH,YAARG,GACPD,EAAMC,GAAQ,eAAC,aAAAC,mBAAAA,IAAAC,kBACb,IAAIC,EAAMN,EAAQG,SAARH,GAAcC,EAAMM,mBAAeF,IAC7C,GAAW,MAAPC,EAAa,CACf,GAAIA,EAAIE,KAAM,OAAOF,EAAIE,KAAKP,EAAMQ,UACpCR,EAAMQ,SAASH,MALZH,GAUT,OAAOD,gVCTT,aAAA,qDAEEQ,QAAQA,EAAKC,WACbD,UAAUA,EAAKE,aAgBfF,SAAS,WACP,IAAMG,EAASH,EAAKC,WACfG,EAAaD,EAAQH,EAAKK,QAC7BL,EAAKD,SAASI,MAMpB,OA5BqCG,OAInCC,+BAAA,WACEC,KAAKC,YAAcD,KAAKE,QAAQnB,MAAMoB,UAAUH,KAAKI,SAEvDL,iCAAA,WACEC,KAAKC,YAAYD,KAAKI,SAExBL,qBAAA,WACU,IAAAM,wBACFR,EAASG,KAAKE,QAAQnB,OAASiB,KAAKE,QAAQnB,MAAMM,eACxD,OAAOgB,EAAaA,EAAWR,EAAOG,KAAKM,OAAST,GAEtDE,uBAAA,WAEE,OAAOQ,qBAAqBP,KAAKE,QAAQnB,QAQ3CgB,mBAAA,SAAOS,EAAcX,EAAOY,OAAnBC,aAAqB3B,UAC5B,OAAO2B,EAAS,MAAK3B,SAAUc,EAAUG,KAAKlB,cA1Bb6B,2BCArC,4DAOA,OAPsCb,OACpCc,4BAAA,WACE,OAAS7B,MAAOiB,KAAKM,MAAMvB,QAE7B6B,mBAAA,WACE,OAAOZ,KAAKM,MAAMI,SAAS,OALOC"}